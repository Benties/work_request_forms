{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Paper,Typography,TextField,Button,Box,CircularProgress,Alert,Select,MenuItem,FormControl,InputLabel}from'@mui/material';import{api}from'../config/quickbase.ts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkRequestForm=()=>{const navigate=useNavigate();const[subject,setSubject]=useState('');const[priority,setPriority]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSubmit=async event=>{event.preventDefault();if(!subject||!priority){setError('Please fill in all required fields');return;}setLoading(true);setError(null);try{const response=await api.createWorkRequest(subject,priority);console.log(response);// Navigate to question list with the returned IDs\nnavigate(`/questions?userId=${response.data[0][4].value.email}&requestId=${response.data[0][3].value}&formId=${response.data[0][32].value}`);}catch(error){setError('Failed to create work request');console.error('Error creating work request:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh',p:2},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,maxWidth:600,width:'100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"New Work Request\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{mb:4},children:\"Please provide the following details to create your work request.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Subject\",value:subject,onChange:e=>setSubject(e.target.value),required:true,margin:\"normal\",error:!!error&&!subject,helperText:error&&!subject?'Subject is required':''}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",required:true,error:!!error&&!priority,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Priority Level\"}),/*#__PURE__*/_jsxs(Select,{value:priority,label:\"Priority Level\",onChange:e=>setPriority(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Low\",children:\"Low\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"High\",children:\"High\"})]}),error&&!priority&&/*#__PURE__*/_jsx(Typography,{color:\"error\",variant:\"caption\",children:\"Priority level is required\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:error}),/*#__PURE__*/_jsx(Box,{sx:{mt:3,display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",disabled:loading,size:\"large\",children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Next'})})]})]})});};export default WorkRequestForm;","map":{"version":3,"names":["React","useState","useNavigate","Paper","Typography","TextField","Button","Box","CircularProgress","Alert","Select","MenuItem","FormControl","InputLabel","api","jsx","_jsx","jsxs","_jsxs","WorkRequestForm","navigate","subject","setSubject","priority","setPriority","loading","setLoading","error","setError","handleSubmit","event","preventDefault","response","createWorkRequest","console","log","data","value","email","sx","display","justifyContent","alignItems","minHeight","p","children","elevation","maxWidth","width","variant","component","gutterBottom","color","mb","onSubmit","fullWidth","label","onChange","e","target","required","margin","helperText","severity","mt","type","disabled","size"],"sources":["/home/ben/lighthouse/work_requsts/frontend/src/components/WorkRequestForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  CircularProgress,\n  Alert,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel\n} from '@mui/material';\nimport { api } from '../config/quickbase.ts';\n\nconst WorkRequestForm = () => {\n  const navigate = useNavigate();\n  const [subject, setSubject] = useState('');\n  const [priority, setPriority] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!subject || !priority) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await api.createWorkRequest(subject, priority);\n      console.log(response);\n      // Navigate to question list with the returned IDs\n      navigate(`/questions?userId=${response.data[0][4].value.email}&requestId=${response.data[0][3].value}&formId=${response.data[0][32].value}`);\n    } catch (error) {\n      setError('Failed to create work request');\n      console.error('Error creating work request:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '100vh',\n        p: 2\n      }}\n    >\n      <Paper elevation={3} sx={{ p: 4, maxWidth: 600, width: '100%' }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          New Work Request\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\n          Please provide the following details to create your work request.\n        </Typography>\n\n        <form onSubmit={handleSubmit}>\n          <TextField\n            fullWidth\n            label=\"Subject\"\n            value={subject}\n            onChange={(e) => setSubject(e.target.value)}\n            required\n            margin=\"normal\"\n            error={!!error && !subject}\n            helperText={error && !subject ? 'Subject is required' : ''}\n          />\n\n          <FormControl fullWidth margin=\"normal\" required error={!!error && !priority}>\n            <InputLabel>Priority Level</InputLabel>\n            <Select\n              value={priority}\n              label=\"Priority Level\"\n              onChange={(e) => setPriority(e.target.value)}\n            >\n              <MenuItem value=\"Low\">Low</MenuItem>\n              <MenuItem value=\"Medium\">Medium</MenuItem>\n              <MenuItem value=\"High\">High</MenuItem>\n            </Select>\n            {error && !priority && (\n              <Typography color=\"error\" variant=\"caption\">\n                Priority level is required\n              </Typography>\n            )}\n          </FormControl>\n\n          {error && (\n            <Alert severity=\"error\" sx={{ mt: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          <Box sx={{ mt: 3, display: 'flex', justifyContent: 'flex-end' }}>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              disabled={loading}\n              size=\"large\"\n            >\n              {loading ? <CircularProgress size={24} /> : 'Next'}\n            </Button>\n          </Box>\n        </form>\n      </Paper>\n    </Box>\n  );\n};\n\nexport default WorkRequestForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}